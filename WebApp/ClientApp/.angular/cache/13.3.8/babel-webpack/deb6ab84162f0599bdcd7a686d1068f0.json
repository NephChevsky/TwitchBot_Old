{"ast":null,"code":"import _asyncToGenerator from \"D:\\\\Dev\\\\Twitch\\\\WebApp\\\\ClientApp\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { HubConnectionBuilder, HubConnectionState } from '@microsoft/signalr';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\n\nfunction AlertsComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.value, \" \");\n  }\n}\n\nfunction AlertsComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.messageContinued, \" \");\n  }\n}\n\nexport let AlertsComponent = /*#__PURE__*/(() => {\n  class AlertsComponent {\n    constructor(ngZone) {\n      this.ngZone = ngZone;\n      this.username = \"\";\n      this.message = \"\";\n      this.messageContinued = \"\";\n      this.value = -1;\n      this.GetStartedHubConnection().then(hub => hub.on(\"TriggerAlert\", data => this.ngZone.run(() => this.triggerAlert(data))));\n    }\n\n    ngOnInit() {}\n\n    ngOnDestroy() {\n      this.StopHubConnection();\n    }\n\n    GetHubConnection() {\n      if (!this.hubConnection) {\n        this.hubConnection = new HubConnectionBuilder().withUrl(\"/hub\").withAutomaticReconnect().build();\n      }\n\n      this.hubConnection.onreconnecting(this.onreconnecting);\n      return this.hubConnection;\n    }\n\n    GetStartedHubConnection() {\n      return new Promise((resolve, reject) => {\n        this.StartHubConnection().then(() => resolve(this.hubConnection)).catch(reject);\n      });\n    }\n\n    RestartHubConnection() {\n      this.StopHubConnection();\n      this.StartHubConnection();\n    }\n\n    StopHubConnection() {\n      if (this.hubConnection && this.hubConnection.state === HubConnectionState.Connected) {\n        this.hubConnection.stop();\n        delete this.started;\n        delete this.hubConnection;\n      }\n    }\n\n    StartHubConnection() {\n      if (!this.started) {\n        this.started = this.GetHubConnection().start();\n      }\n\n      return this.started;\n    }\n\n    onreconnecting(error) {\n      console.log(error);\n      console.log(\"Connection lost, reconnecting...\");\n    }\n\n    toggle(show = false) {\n      var element = document.getElementById(\"container\");\n      if (show) element === null || element === void 0 ? void 0 : element.classList.add(\"show-item\");else element === null || element === void 0 ? void 0 : element.classList.remove(\"show-item\");\n    }\n\n    triggerAlert(alert) {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        switch (alert.type) {\n          case \"channel_follow\":\n            _this.username = alert.username;\n            _this.message = \"a follow la chaine\";\n            _this.messageContinued = \"\";\n            break;\n\n          case \"channel.subscribe\":\n            break;\n\n          case \"channel.subscription.gift\":\n            break;\n\n          case \"channel.subscription.message\":\n            break;\n\n          case \"channel.cheer\":\n            break;\n\n          case \"channel.raid\":\n            _this.username = alert.username;\n            _this.message = \"a raid la chaine avec\";\n            _this.value = alert.viewers;\n            _this.messageContinued = \"viewers\";\n            break;\n        }\n\n        var audio = new Audio('../assets/alerts.wav');\n        audio.play();\n\n        _this.toggle(true);\n\n        setTimeout(_this.toggle, 5000);\n      })();\n    }\n\n  }\n\n  AlertsComponent.ɵfac = function AlertsComponent_Factory(t) {\n    return new (t || AlertsComponent)(i0.ɵɵdirectiveInject(i0.NgZone));\n  };\n\n  AlertsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AlertsComponent,\n    selectors: [[\"app-alerts\"]],\n    decls: 10,\n    vars: 4,\n    consts: [[\"id\", \"container\", 1, \"container\"], [\"src\", \"../assets/barbarian.png\"], [1, \"centered\"], [1, \"text\", \"color\"], [1, \"text\"], [\"class\", \"text color\", 4, \"ngIf\"], [\"class\", \"text\", 4, \"ngIf\"]],\n    template: function AlertsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelement(1, \"img\", 1)(2, \"br\");\n        i0.ɵɵelementStart(3, \"div\", 2)(4, \"div\", 3);\n        i0.ɵɵtext(5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"div\", 4);\n        i0.ɵɵtext(7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(8, AlertsComponent_div_8_Template, 2, 1, \"div\", 5);\n        i0.ɵɵtemplate(9, AlertsComponent_div_9_Template, 2, 1, \"div\", 6);\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate1(\" \", ctx.username, \" \");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\" \", ctx.message, \" \");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.value != -1);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.messageContinued != \"\");\n      }\n    },\n    directives: [i1.NgIf],\n    styles: [\".container[_ngcontent-%COMP%]{font-family:myriad-pro,sans-serif;font-weight:700;text-align:center;opacity:0;width:400px}.centered[_ngcontent-%COMP%]{font-size:40px;color:#fff;-webkit-text-stroke:.5px black;display:inline-block}.text[_ngcontent-%COMP%]{display:inline-block;padding-left:5px;padding-right:5px}.show-item[_ngcontent-%COMP%]{animation:show-item-anim 5s}.hide-item[_ngcontent-%COMP%]{animation:hide-item-anim 1s}@keyframes show-item-anim{2%{opacity:.1}4%{opacity:.2}6%{opacity:.3}8%{opacity:.4}10%{opacity:.5}12%{opacity:.6}14%{opacity:.7}16%{opacity:.8}18%{opacity:.9}20%{opacity:1}30%{opacity:1}40%{opacity:1}50%{opacity:1}60%{opacity:1}70%{opacity:1}80%{opacity:1}82%{opacity:.9}84%{opacity:.8}86%{opacity:.7}88%{opacity:.6}90%{opacity:.5}92%{opacity:.4}94%{opacity:.3}96%{opacity:.2}98%{opacity:.1}to{opacity:0}}.color[_ngcontent-%COMP%]{color:#f9f}\"]\n  });\n  return AlertsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}